%!PS-Adobe-1.0
%% Description: Chess board
%% Author: Neale Pickett <neale@woozle.org>
%% URL: http://woozle.org/~neale/src/ubk/

/base 69.75 def
/-base 0 base sub def

% Adjust page offset
18 18 translate

% Now, scoot the whole thing over to center the page
9 8 translate

/solid true def
/hollow false def

%
% Queens
%
/queen1 {
    /r exch def
    /len 150 sin 15 sin div r mul def
    
    gsave
	translate

	r 0 moveto
	0 0 r 0 360 arc closepath
	0 setgray
	fill

	r 0 moveto
	0 30 330 {
	    /angle exch def
	    /x angle 15 add cos len mul def
	    /y angle 15 add sin len mul def

	    angle 15 add cos r mul
	    angle 15 add sin r mul 
	    moveto

	    % Overshoot a little to make sure
	    x y r  angle 170 add   angle 220 add   arc
	} for
	closepath
	1 setgray
	fill

	r 4 div 0 moveto
	0 0 r 4 div 360 0 arcn closepath
	stroke
    grestore
} def

/queen2 {
    /r exch def
    /len 150 sin 15 sin div r mul def
    
    gsave
	translate

	newpath
	0 30 330 {
	    /angle exch def
	    /x angle 15 add cos len mul def
	    /y angle 15 add sin len mul def

	    angle 30 add cos r mul
	    angle 30 add sin r mul
	    moveto
	    
	    x y r  angle 180 add   angle 210 add   arc
	} for
	0 r moveto
	0 setgray
	closepath
	stroke
    
	r 4 div 0 moveto
	0 0 r 4 div 0 360 arc closepath
	0 setgray
	closepath
	stroke
    grestore
} def

% I had to go through a couple of iterations before I figured it out.
/queen3 {
    /s exch def
    /r exch def
    /q r 4 div def

    /x2 10 cos r mul 0.9 mul def
    /y2 10 sin r mul 0.9 mul def

    /x3 20 cos r mul 0.9 mul def
    /y3 20 sin r mul 0.9 mul def

    gsave
	currentpoint translate

	r 0 moveto

	1 1 12 {
	    pop
	    
	    x2 y2
	    x3 y3
	    30 cos r mul  30 sin r mul
	    curveto

	    30 rotate
	} for

	closepath
	s { fill } { stroke } ifelse

	r 32 div setlinewidth
	s { 1 setgray } { 0 setgray } ifelse
	q 0 moveto
	0 0 q 0 360 arc
	closepath
	stroke
    grestore
} def

/queen { queen3 } def


% King
/king {
    /s exch def
    /r exch def

    /a .75 r mul def
    /a- 0 a sub def
    /b .5 r mul def
    /b- 0 b sub def
    
    gsave
	currentpoint translate
	newpath

	a 2 div  a 2 div   moveto
	b 0 rlineto
	0 a- rlineto
	b- 0 rlineto

	0 b- rlineto
	a- 0 rlineto
	0 b rlineto

	b- 0 rlineto
	0 a rlineto
	b 0 rlineto

	0 b rlineto
	a 0 rlineto
	0 b- rlineto

	closepath
	s { fill } { stroke } ifelse
    grestore
} def


/rook {
    /s exch def
    /r exch def
    /q r .75 mul def

    gsave
	currentpoint translate

	/x 15 cos q mul def
	/y 15 sin q mul def

	1 1 4 {
	    pop
	    
	    x y moveto

	    0 0 r 15 75 arc
	    0 0 q 75 15 arcn

	    closepath
	    s { fill } { stroke } ifelse

	    90 rotate
	} for
    grestore
} def


/bishop {
    /s exch def
    /r exch def
    /q r 4 div def

    /x2 r .15 mul def
    /y2 r .53 mul def

    /x3 0 x2 sub def
    /y3 y2 def
    
    gsave
	currentpoint translate

	/x 50 cos r mul def
	/y 50 sin r mul def

	x y moveto
	
	1 1 4 {
	    pop
	    
	    x y lineto

	    x2 y2
	    x3 y3
	    130 cos r mul  130 sin r mul
	    curveto

	    90 rotate
	} for

	closepath
	s { fill } { stroke } ifelse

	r 32 div setlinewidth
	s { 1 setgray } { 0 setgray } ifelse
	q 0 moveto
	0 0 q 0 360 arc
	closepath
	stroke
    grestore
} def


% This knight sucks.  But it's hard to draw a horse with radial
% symmetry.  Too bad the Indians had more horses than jellyfish.
/knight1 {
    /s exch def
    /r exch def

    gsave
        currentpoint translate

	1 1 4 {
	    pop
	    
	    0  r 8 div  moveto
	    50 cos r mul  50 sin r mul
	    lineto
	    0 r 0.6 mul
	    0 r 0.6 mul
	    130 cos r mul  130 sin r mul
	    curveto

	    closepath
	    s { fill } { stroke } ifelse

	    90 rotate
	} for
    grestore
} def

/knight2 {
    /s exch def
    /r exch def

    gsave
        currentpoint translate

	1 1 4 {
	    pop
	    
	    0  r 8 div  moveto
	    50 cos r mul  50 sin r mul
	    lineto
	    130 cos r mul  130 sin r mul
	    lineto

	    closepath
	    s { fill } { stroke } ifelse

	    90 rotate
	} for
    grestore
} def

/knight { knight2 } def


/pawn {
    /s exch def
    /r exch def
    /q r .40 mul def
    /p r .65 mul def

    gsave
	currentpoint translate

	q 0 moveto
	0 0 q 0 360 arc
	closepath
	s { fill } { stroke } ifelse

	r 8 div setlinewidth
	q 0 moveto
	0 0 q
	0 360 arc
	closepath
	stroke
    grestore
} def

/circle {
    /s exch def
    /r exch def
    /p r 6 div def

    gsave
	p setlinewidth
	currentpoint
	r 0 rmoveto
	r 0 360 arc
	closepath
	s { fill } { stroke } ifelse
    grestore
} def

/box {
    /r exch def
    /-r 0 r sub def
    
    currentpoint

    gsave
	newpath
	translate
	0 0 moveto
	r 0 rlineto
	0 r rlineto
	-r 0 rlineto
	closepath
	fill
    grestore
} def


gsave
    0 91 translate

    newpath
    0 0 moveto
    base 8 mul 0 rlineto
    0 base 8 mul rlineto
    -base 8 mul 0 rlineto
    0 -base 8 mul rlineto
    closepath
    stroke

    0   base 2 mul   base 7 mul  {
	/y exch def
    
	0   base 2 mul   base 7 mul  {
	    /x exch def

	    x y moveto
	    base box

	    x base add y base add moveto
	    base box
	} for
    } for
grestore

/Times-Roman findfont 12 scalefont setfont

gsave
    93 20 moveto
    18 hollow king
    -12 -30 rmoveto
    (King) show

    186 20 moveto
    18 hollow queen
    -15 -30 rmoveto
    (Queen) show

    279 20 moveto
    18 hollow rook
    -13 -30 rmoveto
    (Rook) show

    372 20 moveto
    18 hollow bishop
    -16 -30 rmoveto
    (Bishop) show

    465 20 moveto
    18 hollow knight
    -17 -30 rmoveto
    (Knight) show
grestore

gsave
    base 8 mul  740   translate
    180 rotate

    93 20 moveto
    18 solid king
    -12 -30 rmoveto
    (King) show

    186 20 moveto
    18 solid queen
    -15 -30 rmoveto
    (Queen) show

    279 20 moveto
    18 solid rook
    -13 -30 rmoveto
    (Rook) show

    372 20 moveto
    18 solid bishop
    -16 -30 rmoveto
    (Bishop) show

    465 20 moveto
    18 solid knight
    -17 -30 rmoveto
    (Knight) show
grestore

showpage
